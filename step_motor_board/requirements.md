# Плата шаговых двигателей

## Общие сведения
Плата шаговых двигателей представляет собой двухканальный драйвер для шаговых двигателей.

## Назначение
Крутит ШД через драйвер вдоль оси, ограниченной двумя концевиками
Управлять двигателями в платформе узлов теста и упаковки
Перемещать 7ю ось (пластина крепления манипулятора) с промежуточным концевиком
(концевик посреди оси, во время движения через него проверяем позицию)
Перемещать оси узла нарезки (синхронное/независимое движение осей корзинки,
ножа, подставки)

## Функции
[[../requirements.md#Общие требования для всех плат]]

[[../requirements.md#Общие требования для дочерних плат]]

1. Контур драйвера ШД
   1. Независимые сигналы (EN, DIR, STEP)
   2. Напряжение сигналов: 22..24 В
   3. Выдаваемый ток: \>= 10 мА
   4. Задержка сигнала; \<= 100 мкс
      (время от фронта на мк до фронта на коннекторе)
   5. STEP
      1. Подключена на пин с каналом таймера
      2. Частота сигнала: \>= 400 кГц (при скважности 50%)
      3. Длина пульса: \>= 2 мкс
2. Контур концевиков
   1. Независимые сигналы
      (могут сработать в любой комбинации, должны различать это на мк)
   2. Задержка срабатывания: \<= 100 мкс
      (время от фронта на коннекторе до фронта на мк)

## Габаритные размеры
????

## Коннекторы и распиновка
- Изолированный интерфейс для контроллера шаговых двигателей, учесть возможность подключения в том числе и гибридного двигателя
- 2 дискретных входа для концевых выключателей.
- Источник питания, изолированный
- трансивер 485, изолированный
- RTS выход, изолированный
- Управляющий микроконтроллер

Сигналы:

- dir
- step
- enable
- in positioning
- alarm
- 2xDI

В случае, если логическая часть схемы не запитана, токоудержание (сигнал EN) должен быть отключен или подтянут к земле. Максимальная частота сигнала шага (PUL/STEP): 500 кГц. Каждый вход/выход должен подключаться отдельным коннектором. Уровни сигнала - 24В. Не забываем про защиту и ограничители на выходах.

## Питание
Питание для двигателей должно заводиться НЕ через краевой разъем материнской платы, а посредством дополнительного коннектора

## Шина данных
Шина представляет собой RS485 с одним лишь дополнением. Используется дополнительно линия RTS, по одной линии на каждый дочерний модуль, за исключением "процессорного модуля"
На "процессорном модуле" количество RTS линий соотвествует количеству возможных дочерних модулей исполнительных устройств, например 16. На "процессорном модуле"
линии RTS - входы. На дочерних - выходы.

## Дополнительно
Все входы-выходы должны иметь защиту от перенапряжения, обратной полярности, статики и т.п.(см IEC 61131 и прочие посказки)

