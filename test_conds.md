## 1. Сборки плат (материнская + контроллерная +)

\\1.1|
**дискретная плата + плата ШД (УВТ)**

\\1.2|
**плата ШД, плата ДПТ, плата QR кодов (Нарезка)**

\\1.3|
**плата ШД, плата ДПТ (Упаковка)**

\\1.4|
**симисторная плата, плата аналоговых вх\вых (Печь)**

\\1.5|
**Сборка MAX**
2 симисторные платы + 2 платы аналоговых вх\вых + плата дискретных вх\вых + 2 платы ШД + 2 платы QR кодов + плата ДПТ

----------------------------------------------

## 2. Исполнительные устройства

\\2.1|
**Драйвер + Шаговый Двигатель (ШД)**

\\2.2|
**Двигатель Постоянного Тока (ДПТ)**

\\2.3|
**Реле печи**

\\2.4|
**Датчик тока**

\\2.5|
**Датчик температуры**

\\2.6|
**Вентилятор**

\\2.7|
**led, сигналы**

\\2.8|
**Нагрузочный стенд с нихромовыми спиралями (24V, 1A)**

\\2.9|
**Спирали печи**

\\2.10|
**Концевые выключатели**

----------------------------------------------

## 3. Сигналы
Тестировать сигналы предполагается таким образом, чтобы потребители генерировали максимальное шумовое загрязнение эфира: 
- симисторы в печи и в аналоговой плате работают с открытием 25%, 50%, 75% и 100%
- Двигатель постоянного тока работает рывками и нагружается на 1-2 сек в цикле
- Шаговый двигатель испытывает максимальное ускорение (также, как и ДПТ работа рывками по 1-2 сек в цикле)


\\3.1|
**RTS**
    \\3.1.1|
    все дочерние взвели rts
    управляющая ждёт нисходящий фронт; если видит, включает светодиод
    \\3.1.2|
    rts опущены, управляющая ловит восходящий фронт

\\3.2|
**RS внешний**
Управляющая читает символы до '\n', повторяет полученную строку комп шлёт строку, сравнивает полученный ответ, и так по циклу

\\3.3|
**RS дочерних плат**
хореография: дочерние по очереди каждая шлёт своё сообщение в шину. Шлёт, когда видит на шине сообщение предыдущей платы
(плата\_2 ждёт сообщение '111', увидела - шлёт '222', ждёт дальше)
управляющая тогглит диод, когда очередь проходит через неё
(т.е. если всё ок, на управляющей диод мерцает с одинаковой частотой)

Напряжение на A, B должно быть
    \\3.3.1|
    мин и макс: 0+-10% и 3.3В +-10%
    \\3.3.2|
    среднее (idle): 1.65 +-10% В


\\3.4|
**Концевые выключатели**
    \\3.4.1|
    концевики открыты
    дочерняя ловит восходящий фронт; если видит, включает диод
    \\3.4.2|
    концевики закрыты, дочерняя ловит восходящий, диод на фронт

\\3.5|
**Термопара**
датчик на столе
аналоговая замеряет температуру, шлёт среднее раз в секунду
управляющая читает и повторяет в свой отладочный порт
различие с и без работы нагрузки не более 2х градусов

\\3.6|
**Датчик тока**
Протекание граничных значений (min\max) тока через датчик

\\3.7|
**Фототранзисторы**
Максимально нагружены транзисторы (открыты - если npn, закрыты - если pnp)

----------------------------------------------

## 4. Нагрузочные условия

\\4.1|
**Линия 24V**
тестирование уровня напряжения (не падает ли) под нагрузкой. Забить все слоты материнской платы и нагружать потребителей 24V

\\4.2|
**Линия 3.3V**
то же самое, что и в 4.1, только для линии 3.3V

\\4.3|
**Уровни напряжений в границах допустимого**
проверка работоспособности в рабочих диапазонах напряжения (преобразователи напряжения, чистые потребители). Менять напряжение на линии 24V в пределах 5% вверх и вниз от эталонного значения.

\\4.4|
**Уровни напряжений за границей допустимого**
тестирование сработки защит от перенапряжения. подавать на линии 24V напряжение ±25-30% от номинала.

\\4.5|
**Сработка защиты от переполюсовки** 
подать обратную полярность на линию 24V

\\4.6|
**Предельная нагрузка**
Максимальная сборка плат (1.5) работает единомоментно в предельном режиме

----------------------------------------------

## 5. Внезапное отключение питания

**Отключение линии 24V**
    \\5.1.1|
    Отключение всех плат после инициализации.
    \\5.1.2|
    Отключение Master-платы в момент отправки команды на нагрузку.
    \\5.1.3|
    Отключение питания во время обмена данными между Master и Slave.
    \\5.1.4|
    Отключение питания во время работы Slave-плат под нагрузкой.
    \\5.1.5|
    Отключение питания в момент смены состояния RTS.
    \\5.1.6|
    Отключение питания во время вращения ШД.
    \\5.1.7|
    Отключение питания во время работы ДПТ.
    \\5.1.8|
    Отключение питания во время работы симисторных ключей.
    \\5.1.9|
    Отключение питания в момент подачи питания на реле печи.
    \\5.1.10|
    Отключение питания во время обмена данными по RS.
    \\5.1.11|
    Отключение питания во время переключения концевых выключателей.
    \\5.1.12|
    Отключение питания во время работы фототранзисторов.
    \\5.1.13|
    Проверка работы после длительного отключения питания
    \\5.1.14|
    Кратковременные периодические отключения силовой линии 24В во время вращения ДПТ
    \\5.1.15|
    Отключение силовой линии 24В, когда происходит засветка фототранзисторов
    \\5.1.16|
    Кратковременные периодические отключения силовой линии 24В
    \\5.1.17|
    Кратковременные периодические отключения питания материнской платы

\\5.2|
**Отключение линии 230V**
    \\5.2.1|
    Отключение питания спиралей печи, когда симисторы открыты на 50%
    \\5.2.2|
    Отключение питания вентиляторов во время их работы
    \\5.2.3|
    Отключение питания всей сборки во время простоя
    \\5.2.4|
    Отключение питания всей сборки во время активной работы

Расписать блок с условиями для 24В силовых
----------------------------------------------

## 6. Механические тесты

\\6.1|
**Краевые разъёмы**
Вставить\достать плату 50 раз

\\6.2|
**Осевая нагрузка на плату**
Пальцами изгибать полотно платы, взявшись за уголки

\\6.3|
**Вибрационная нагрузка**
имитация процесса доставки сборки к месту эксплуатации

----------------------------------------------

## 7. Реалистичные сценарии

\\7.1|
**3 ячейки печи**
две ячейки печи, поочерёдно работают на 100% в течение 30 секунд; третья ячейка рядом на 50% одна спираль
    (прогрев, корочка перед выдачей, выпекание)

\\7.2|
**шаговые двигатели**
шаговики на 25000 (500 мм/с, 50 шагов на мм) рывками по 50 мм со сменой направления
    (пилящие движения)

\\7.3|
**2 насоса**
    два включаются на 100%
        (мойка)
    один работает 100% 20 секунд, затем 1 секунду 100% в обратном направлении
        (полив, забор капли) 
    2 насоса одновременно 100% 20 секунд по часовой, 100% 1 секунду против часовой

\\7.4|
**фототранзисторы**
    у одной платы запитаны светодиоды, на другой транзисторы
    транзисторы НЕ засвечены (так больше тока потребляется или нет)
    led\_1, запитана линия LED
    led\_2, запитана линия FT