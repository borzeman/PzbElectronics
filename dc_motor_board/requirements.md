# Плата двигателей постоянного тока

## Общие сведения
Плата представляет собой двухканальный драйвер для двигателей постоянного тока. Каждый двигатель должен управляться независимо. Требуется возможность изменять направление движения (реверс), скоростью.

## Назначение платы
Управлять насосами:
- поливать соусом (перистальтический насос, проталкивает соус из бака по трубке 1-1.5 метра
- прокачивать воду для промывки ёмкостей

## Функции
[[../requirements.md#Общие требования для всех плат]]

[[../requirements.md#Общие требования для дочерних плат]]

1. Управление двигателями постоянного тока
   1. Как одновременно, так и отдельно
   2. Независимое управление (разные скорости и направления на канал, например)
   3. Регулировка скорости (ШИМ)
   4. Смена направления (реверс)
2. Характеристики канала
   1. Напряжение: 24 В
   2. Выдерживает ток: \>= 2 А
   3. Предельные режимы работы нагрузки:
      1. \>= 2 минуты непрерывной работы
      2. Запуск/остановка раз в 5 секунд
   4. Частота ШИМ: не менее 500 Гц
   5. Разрешение ШИМ: не менее 1%
   6. Задержка включения/выключения: \< 100 мкс
      (время от фронта на мк до фронта на двигателе)
3. Защита от переполюсовки питания
   Плата не должна выйти из строя от переполюсовки внешнего питания
   (выдерживает \>= 2 минуты подключения питания с обратной полярностью)
4. Без питания логической части не должен подаваться ток на двигатели
   (даже если силовая часть запитана, а логика нет)


## Габаритные размеры
????

## Коннекторы и распиновка
Питание для двигателей должно заводиться НЕ через краевой разъем материнской платы, а посредством дополнительного коннектора.

## Питание
Питание заводится со стабилизированного блока питания 24В

## Шина данных
Шина представляет собой RS485 с одним лишь дополнением. Используется дополнительно линия RTS, по одной линии на каждый дочерний модуль, за исключением "процессорного модуля"
На "процессорном модуле" количество RTS линий соотвествует количеству возможных дочерних модулей исполнительных устройств, например 16. На "процессорном модуле"
линии RTS - входы. На дочерних - выходы.
Сигналы, управляющие скоростью должны быть мультиплексированы, например, с использованием чипа PCA9685 в случае,если логическая часть схемы не запитана,двигатели не должны вращаться 
в старом варианте схемы это не так. Сразу после перезагрузки микроконтроллера,выходы находятся в подвешенном состоянии. Двигатели не должны вращаться в этот момент

## Дополнительно
Все входы-выходы должны иметь защиту от перенапряжения, обратной полярности, статики и т.п.(см IEC 61131 и прочие посказки)

