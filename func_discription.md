**init_func** — основной контроллер, который активируется при подаче питания. Он инициализирует дочерние модули, управляет цветом светодиода и переводит систему в основной режим работы.

### Алгоритм работы прошивки:

1. **Ввод и подтверждение количества плат**  
   - Ожидание ввода количества задействованных плат через UART в течение 30 секунд.  
   - **Индикация:** светодиод мигает красным.  
   - Считать количество плат (от 1 до 11) и записать его в переменную.  
   - Отправить значение переменной обратно по UART для подтверждения получения.
   - Если за 30 сек не получилось: светодиод загорается красным (10 сек), программа завершается

2. **Режим размещения плат и подачи питания**  
   - Ожидание размещения всех плат, включая контроллерную, на материнской плате и подачи питания.  
   - Ожидание подтверждения по UART (значение "1") в течение 120 секунд.
   - **Индикация:** светодиод мигает жёлтым.
   - После подтверждения светодиод мигнёт жёлтым 3 раза. 

3. **Режим прослушивания RTS**  
   - Система переходит в режим прослушивания RTS на 60 секунд.  
   - **Индикация:** светодиод плавно загорается и гаснет жёлтым цветом.  

4. **Проверка подтверждения**  
   - Если подтверждения получены от всех линий (сравнение с числом в переменной), светодиод загорается зелёным.  
   - В случае отсутствия подтверждения после 60 секунд светодиод загорается красным.

- **child_init** - инициализирующая прошивка для дочерних модулей, которая поднимает линию RTS и отвечает кодом готовности после запроса main контроллера, например: 11111111

- **master_load_test_01** - отправить команды на активацию нагрузочных прошивок с интервалом в 1 сек по очереди на каждую плату. потом раз в несколько секунд выдёргивать логи с каждой платы и выводить в терминал.

- **master_load_test_02** - при отправке в терминал айдишника платы (или порядкового номера в мат.плате) отправляет на конкретную плату сигнал об активации нагрузочной прошивки. Раз в 10 сек запрашивать данные датчиков с аналоговой платы.

- **step_motor_load_test** - вращать 2 шаговых двигателя в одну сторону 10 оборотов, в другую сторону 10 оборотов, на максимальной скорости\на максимальном ускорении. Читать показания с концевиков и писать в лог по изменению.

- **triac_load_test** - в момент времени t0 на 1й плате включаются 2 симистора на 100% и 2 на 50%, если задействована вторая плата - также, после истечения 2х мин - спирали поменять местами (те, которые были на 100%, теперь 50%, те которые 50%, теперь 100%) 

- **sensor_readout** - считывать показания аналоговых датчиков (датчик тока, 2 термопары), поднимать линию RTS, отправлять пакетом собранные данные (логировать раз в 1 сек, посылать раз в 10 сек)

- **analog_load_test** - изменять открытие симисторов от 1% до 100% и обратно в течении 30 секунд, повторить цикл несколько раз

- **digit_load_test** - меандр 50% 500 Гц.

- **dc_motor_load_test** - крутить ДПТ 30 сек в одну сторону, 30 сек в другую, повторить цикл несколько раз

- **qr_reader_func** - прочитать показанный QR код, поднять линию RTS, отправить содержимое QR кода на Master