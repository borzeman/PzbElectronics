### функции

**slave_init** - светодиод на плате мигает после инициализации slave-контроллера. (4 пульса по 500мс)

**slave_RTS_updown** - контроллер slave платы после инициализации поднимает линию RTS, после ждёт команды на смену состояния линии и раз в 10 секунд меняет его на противоположное. Дублировать поднятое состояние RTS светодиодом на плате. 

**slave_parad** - дочерние по очереди каждая шлёт своё сообщение в шину. Шлёт, когда видит на шине сообщение предыдущей платы
(плата\_2 ждёт сообщение '111', увидела - шлёт '222', ждёт дальше)
управляющая тогглит диод, когда очередь проходит через неё
(т.е. если всё ок, на управляющей диод мерцает с одинаковой частотой)

**slave_triac_load** - открывает симисторы на 25\50\75\100% в цикле 30 секунд. Дважды

**slave_analog_load** - открывает симисторы на 25\50\75\100% в цикле 30 секунд. Дважды

**slave_analog_readout** - читает\логирует\при запросе отправляет по UART показания датчика тока и термопар

**master_init** - светодиод на плате мигает после инициализации master-контроллера. (4 пульса по 500мс)

**master_RTS_changer** - контроллер master платы после получения команды от оператора ("s") отправляет команду на все slave платы, чтобы они изменили состояние RTS на противоположное, затем мониторит фронты (восходящие, если линия была опущена и наоборот).

**master_load** - после получения стартового символа разослать по дочерним платам команды на максимальную загрузку в течении 2 мин.

**master_blink** - слушает RS, когда видит сообщение от последней платы - мигает светодиодом и пишет в шину своё сообщение

### Прошивки

---

Сценарий 1

**master_010**:
отправка команды на смену состояния RTS
- master_init
- master_RTS_changer

**master_011**:
отправка команды на смену состояния RTS + нагрузка
- master_init
- master_RTS_changer
- master_load

**master_012**:
мигает светодиодом, когда очередь доходит до Master-платы
- master_init
- master_blink

**master_013**:
тоже самое, что 012, только + нагрузка

- master_init
- master_blink
- master_load

**slave_010**:
смена состояния RTS через 10 сек (всего 60 сек)
- slave_init
- slave_RTS_updown

**блок прошивок с нагрузкой**:
смена состояния RTS, как в 010 + нагрузка
slave_init+slave_RTS_updown+load
**slave_011_triac_load**
**slave_011_analog_load**
**slave_011_digit_load**
**slave_011_dc_load**
**slave_011_step_load**
**slave_011_QR_load**

**slave_012**:
проверка дочернего RS
- slave_init
- slave_parad

**slave_013**:
slave_012 + нагрузка
**slave_013_triac_load**
**slave_013_analog_load**
**slave_013_digit_load**
**slave_013_dc_load**
**slave_013_step_load**
**slave_013_QR_load**

---

Сценарий 2

**master_020**:
отправляет команду на нагрузку в режиме, близком к реальному
- master_init
- master_load


**slave_020**
**slave_021_digit_load**:
Контроллер ожидает последовательной сработки всех фототранзисторов, после этого начинает параллельно грузить спирали стенда в течении 60 сек. По истечении 60 сек снять нагрузку со спиралей и зажечь индикаторный светодиод.

**slave_021_step_load**:
ШД вращается в любую сторону до последовательного нажатия на все 4 концевика, потом вращается в другую сторону, продублировать нажатия на концевики ещё раз - ШД остановится. Зажечь индикаторный светодиод.

**slave_022_step_load**:
Оба ШД с максимальным ускорением и скоростью совершают рваные движения на протяжении 60 сек, при нажатии на любой из концевиков движение ставится на паузу, при отпускании - возвращается. Зажечь индикаторный светодиод.

**slave_022_dc_load**:
ДПТ 19 сек вращается в одну сторону, 1 сек в другую, затем наоборот и так 3 раза(всего 60 сек). Зажечь индикаторный светодиод.

**slave_022_QR_load**:
Считывает QR код, поднимает RTS, отправляет содержимое на Master, после получения от мастера сообщения об успешном приёме, зажечь индикаторный светодиод.

**slave_023_step_load**:
ШД вращается в любую сторону со скоростью 1 шаг\сек, после нажатия на 1 или 2 концевик - меняет направление вращения, если была хотя бы 1 сработка концевика - спустя 60 сек с момента старта - зажечь индикаторный светодиод.


**slave_023_dc_load**:
ДПТ вращается в любую сторону со скоростью 1 шаг\сек, после нажатия на 3 или 4 концевик, идущий к плате ШД - меняет направление вращения, если была хотя бы 1 сработка концевика - спустя 60 сек с момента старта - зажечь индикаторный светодиод.


**slave_024_triac_load**:
после получения команды на старт, грузить симисторы по 30 сек на 25%, 50%, 75%, 100% по завершении зажечь индикаторный светодиод.

**slave_024_analog_load**
после получения команды на старт, грузить симисторы по 30 сек на 25%, 50%, 75%, 100% по завершении зажечь индикаторный светодиод.
фоном читать показания термопар и датчика тока, логировать их, раз в 15 сек поднимать RTS и отправлять показания на Master.
при получении команды "r", поднять RTS и отправить на Master текущие логи температуры и показаний датчика тока.
раз в 10 сек переключать состояние реле печи на противоположное.

---

Сценарий 3

**master_030**:
отправляет команду на нагрузку
- master_init
- master_load
