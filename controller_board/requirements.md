# Плата контроллера

## Общие сведения
Плата контроллера представляет собой "мозги" ячейки, расположенной на материнской плате. Имеет на борту отладочную плату Nucleo-64F411, предоставляя интерфейс для подключения шины данных.

## Назначение платы
Управлять дочерними платами, объединёнными в несколько "логических узлов" (в
одной сборке дочерние платы узлов упаковки, 7й оси и выдачи)
Получает от сервера команды для логических узлов ("Упаковка, выдать бумагу")
Распределяет команды на дочерние платы ("ШД 1, поднять до концевика", "ДПТ 1, вращать до отмены")

## Функции
[[../requirements.md#Общие требования для всех плат]]

1. RTS
   1. Сигналы изолированы
   2. Должны обрабатываться из прерывания
   3. Независимая обработка (могут включиться хоть все сразу)
   4. RTS включается до отмены, т.е. это не короткий пульс
   5. Время передачи сигнала: \< 10 мкс
      (от фронта на коннекторе до фронта на пине мк)
2. RS дочерний
   1. Изолированный
   2. Baudrate: \>115200
   3. Задержка передачи: \< 100 мкс
      (от фронта на дочернем мк до фронта на линиях A/B)
3. RS внешний
   1. Изолированный
   2. Baudrate: \>115200
   3. Задержка передачи: \< 100 мкс
      (от фронта на дочернем мк до фронта на линиях A/B)

## Габаритные размеры
????

## Коннекторы и распиновка
- Изолированный источник питания для микроконтроллера
- Изолированный интерфейс передачи данных RS485 для взаимодейтвия с дочерними платами
- Входы RTS от модулей исполнительных устройств(изолированные)
- Изолированный интерфейс для управления блоком (смотрит науржу устройства)
- 
## Питание
24В снимается с краевого разъёма материнской платы и преобразуется через внутренние конвертеры до 5В и 3.3В.

## Шина данных
Шина представляет собой RS485 с одним лишь дополнением. Используется дополнительно линия RTS, по одной линии на каждый дочерний модуль, получается 12 RTS входов + RS485.

## Дополнительно
Все входы-выходы должны иметь защиту от перенапряжения, обратной полярности, статики и т.п.(см IEC 61131 и прочие посказки)
